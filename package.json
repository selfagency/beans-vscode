{
  "name": "beans-vscode",
  "displayName": "Beans",
  "description": "Unofficial Beans issue tracker support for VS Code with Copilot integration",
  "icon": "assets/icon.png",
  "version": "0.1.0",
  "engines": {
    "vscode": "^1.109.0"
  },
  "categories": [
    "Other"
  ],
  "extensionKind": [
    "workspace"
  ],
  "activationEvents": [
    "onStartupFinished",
    "workspaceContains:.beans",
    "workspaceContains:.beans.yml"
  ],
  "main": "./dist/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "beans.init",
        "title": "Initialize Beans in Workspace",
        "category": "Beans"
      },
      {
        "command": "beans.refresh",
        "title": "Refresh",
        "category": "Beans",
        "icon": "$(refresh)"
      },
      {
        "command": "beans.openConfig",
        "title": "Open Configuration",
        "category": "Beans"
      },
      {
        "command": "beans.showOutput",
        "title": "Show Output",
        "category": "Beans",
        "icon": "$(terminal)"
      },
      {
        "command": "beans.view",
        "title": "View Bean",
        "category": "Beans",
        "when": "beans.initialized"
      },
      {
        "command": "beans.create",
        "title": "Create Bean",
        "category": "Beans",
        "icon": "$(add)",
        "when": "beans.initialized"
      },
      {
        "command": "beans.edit",
        "title": "Edit Bean",
        "category": "Beans",
        "icon": "$(edit)",
        "when": "beans.initialized"
      },
      {
        "command": "beans.setStatus",
        "title": "Set Status",
        "category": "Beans",
        "when": "beans.initialized"
      },
      {
        "command": "beans.reopenCompleted",
        "title": "Reopen Completed Bean",
        "category": "Beans",
        "when": "beans.initialized"
      },
      {
        "command": "beans.reopenScrapped",
        "title": "Reopen Scrapped Bean",
        "category": "Beans",
        "when": "beans.initialized"
      },
      {
        "command": "beans.setType",
        "title": "Set Type",
        "category": "Beans",
        "when": "beans.initialized"
      },
      {
        "command": "beans.setPriority",
        "title": "Set Priority",
        "category": "Beans",
        "when": "beans.initialized"
      },
      {
        "command": "beans.setParent",
        "title": "Set Parent",
        "category": "Beans",
        "when": "beans.initialized"
      },
      {
        "command": "beans.removeParent",
        "title": "Remove Parent",
        "category": "Beans",
        "when": "beans.initialized"
      },
      {
        "command": "beans.editBlocking",
        "title": "Edit Blocking Relationships",
        "category": "Beans",
        "when": "beans.initialized"
      },
      {
        "command": "beans.copyId",
        "title": "Copy Bean ID",
        "category": "Beans",
        "when": "beans.initialized"
      },
      {
        "command": "beans.delete",
        "title": "Delete Bean",
        "category": "Beans",
        "icon": "$(trash)",
        "when": "beans.initialized"
      },
      {
        "command": "beans.filter",
        "title": "Filter Beans",
        "category": "Beans",
        "icon": "$(filter)",
        "when": "beans.initialized"
      },
      {
        "command": "beans.search",
        "title": "Search Beans",
        "category": "Beans",
        "icon": "$(search)",
        "when": "beans.initialized"
      },
      {
        "command": "beans.sort",
        "title": "Change Sort Mode",
        "category": "Beans",
        "icon": "$(list-ordered)",
        "when": "beans.initialized"
      }
    ],
    "viewsContainers": {
      "activitybar": [
        {
          "id": "beans",
          "title": "Beans",
          "icon": "assets/icon.svg"
        }
      ]
    },
    "views": {
      "beans": [
        {
          "type": "webview",
          "id": "beans.search",
          "name": "Search",
          "icon": "$(search)",
          "when": "beans.initialized",
          "visibility": "visible"
        },
        {
          "icon": "$(issue-opened)",
          "id": "beans.active",
          "name": "Active",
          "when": "beans.initialized"
        },
        {
          "icon": "$(issue-draft)",
          "id": "beans.draft",
          "name": "Draft",
          "when": "beans.initialized"
        },
        {
          "icon": "$(issue-closed)",
          "id": "beans.completed",
          "name": "Completed",
          "when": "beans.initialized",
          "visibility": "collapsed"
        },
        {
          "icon": "$(error)",
          "id": "beans.scrapped",
          "name": "Scrapped",
          "when": "beans.initialized",
          "visibility": "collapsed"
        },
        {
          "type": "webview",
          "id": "beans.details",
          "name": "Details",
          "when": "beans.initialized",
          "visibility": "visible"
        }
      ]
    },
    "menus": {
      "view/title": [
        {
          "command": "beans.create",
          "when": "view == beans.active && beans.initialized",
          "group": "navigation@1"
        },
        {
          "command": "beans.refresh",
          "when": "view == beans.active && beans.initialized",
          "group": "navigation@2"
        },
        {
          "command": "beans.showOutput",
          "when": "view == beans.active && beans.initialized",
          "group": "navigation@3"
        },
        {
          "command": "beans.edit",
          "when": "view == beans.details && beans.hasSelectedBean",
          "group": "navigation"
        }
      ],
      "view/item/context": [
        {
          "command": "beans.view",
          "when": "view =~ /^beans\\./ && viewItem =~ /^bean/",
          "group": "1_view"
        },
        {
          "command": "beans.edit",
          "when": "view =~ /^beans\\./ && viewItem =~ /^bean/",
          "group": "1_view"
        },
        {
          "command": "beans.setStatus",
          "when": "view =~ /^beans\\./ && viewItem =~ /^bean/",
          "group": "2_modify@1"
        },
        {
          "command": "beans.setType",
          "when": "view =~ /^beans\\./ && viewItem =~ /^bean/",
          "group": "2_modify@2"
        },
        {
          "command": "beans.setPriority",
          "when": "view =~ /^beans\\./ && viewItem =~ /^bean/",
          "group": "2_modify@3"
        },
        {
          "command": "beans.setParent",
          "when": "view =~ /^beans\\./ && viewItem =~ /^bean/",
          "group": "3_relationships@1"
        },
        {
          "command": "beans.removeParent",
          "when": "view =~ /^beans\\./ && viewItem =~ /^bean/ && viewItem =~ /hasParent/",
          "group": "3_relationships@2"
        },
        {
          "command": "beans.editBlocking",
          "when": "view =~ /^beans\\./ && viewItem =~ /^bean/",
          "group": "3_relationships@3"
        },
        {
          "command": "beans.copyId",
          "when": "view =~ /^beans\\./ && viewItem =~ /^bean/",
          "group": "4_util@1"
        },
        {
          "command": "beans.delete",
          "when": "view =~ /^beans\\./ && viewItem =~ /deletable/",
          "group": "5_danger"
        }
      ],
      "webview/context": [
        {
          "command": "beans.view",
          "when": "webviewId == 'beans.search' && webviewSection == 'searchResult'",
          "group": "1_view"
        },
        {
          "command": "beans.edit",
          "when": "webviewId == 'beans.search' && webviewSection == 'searchResult'",
          "group": "1_view"
        },
        {
          "command": "beans.setStatus",
          "when": "webviewId == 'beans.search' && webviewSection == 'searchResult'",
          "group": "2_modify@1"
        },
        {
          "command": "beans.setType",
          "when": "webviewId == 'beans.search' && webviewSection == 'searchResult'",
          "group": "2_modify@2"
        },
        {
          "command": "beans.setPriority",
          "when": "webviewId == 'beans.search' && webviewSection == 'searchResult'",
          "group": "2_modify@3"
        },
        {
          "command": "beans.setParent",
          "when": "webviewId == 'beans.search' && webviewSection == 'searchResult'",
          "group": "3_relationships@1"
        },
        {
          "command": "beans.editBlocking",
          "when": "webviewId == 'beans.search' && webviewSection == 'searchResult'",
          "group": "3_relationships@3"
        },
        {
          "command": "beans.copyId",
          "when": "webviewId == 'beans.search' && webviewSection == 'searchResult'",
          "group": "4_util@1"
        },
        {
          "command": "beans.delete",
          "when": "webviewId == 'beans.search' && webviewSection == 'searchResult'",
          "group": "5_danger"
        }
      ]
    },
    "configuration": {
      "title": "Beans",
      "properties": {
        "beans.cliPath": {
          "type": "string",
          "default": "beans",
          "markdownDescription": "Path to `beans` CLI executable. Defaults to `beans` in PATH."
        },
        "beans.workspaceRoot": {
          "type": "string",
          "default": "",
          "markdownDescription": "Path to Beans workspace folder (containing `.beans` directory). If empty, uses the current workspace root."
        },
        "beans.enableOnlyIfInitialized": {
          "type": "boolean",
          "default": false,
          "description": "Only enable the extension if a .beans.yml file is present in the workspace."
        },
        "beans.view.displayMode": {
          "type": "string",
          "enum": [
            "separate-panes",
            "single-pane"
          ],
          "default": "separate-panes",
          "enumDescriptions": [
            "Show beans in separate panes by status (Active, Completed, Draft, Scrapped)",
            "Show all beans in a single unified tree with filter controls (coming soon)"
          ],
          "description": "Choose how beans are displayed in the sidebar. Requires extension reload to take effect."
        },
        "beans.autoInit.enabled": {
          "type": "boolean",
          "default": true,
          "description": "Show initialization prompt when opening a workspace without Beans."
        },
        "beans.defaultSortMode": {
          "type": "string",
          "enum": [
            "status-priority-type-title",
            "priority-status-type-title",
            "updated",
            "created",
            "id"
          ],
          "default": "status-priority-type-title",
          "enumDescriptions": [
            "Sort by status, then priority, then type, then title (TUI default)",
            "Sort by priority, then status, then type, then title (better for active pane)",
            "Sort by last updated time",
            "Sort by creation time",
            "Sort by bean ID/code"
          ]
        },
        "beans.hideClosedInQuickPick": {
          "type": "boolean",
          "default": true,
          "description": "Hide completed and scrapped beans from command palette quick picks (except explicit reopen commands)."
        },
        "beans.logging.level": {
          "type": "string",
          "enum": [
            "debug",
            "info",
            "warn",
            "error"
          ],
          "default": "info",
          "description": "Logging verbosity for Beans extension output channel."
        }
      }
    }
  },
  "scripts": {
    "vscode:prepublish": "pnpm run package",
    "compile": "pnpm run check-types && pnpm run lint && node esbuild.js",
    "watch": "npm-run-all -p watch:*",
    "watch:esbuild": "node esbuild.js --watch",
    "watch:tsc": "tsc --noEmit --watch --project tsconfig.json",
    "package": "pnpm run check-types && pnpm run lint && node esbuild.js --production",
    "compile-tests": "tsc -p . --outDir out",
    "watch-tests": "tsc -p . -w --outDir out",
    "pretest": "pnpm run compile-tests && pnpm run compile && pnpm run lint",
    "check-types": "tsc --noEmit",
    "lint": "eslint src",
    "test": "vscode-test"
  },
  "devDependencies": {
    "@types/mocha": "^10.0.10",
    "@types/node": "22.x",
    "@types/vscode": "^1.109.0",
    "@vscode/test-cli": "^0.0.12",
    "@vscode/test-electron": "^2.5.2",
    "esbuild": "^0.27.2",
    "eslint": "^9.39.2",
    "npm-run-all": "^4.1.5",
    "typescript": "^5.9.3",
    "typescript-eslint": "^8.54.0"
  },
  "dependencies": {
    "@vscode/codicons": "^0.0.44"
  }
}